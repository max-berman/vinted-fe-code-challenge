(this["webpackJsonpvinted-fe-code-challenge"]=this["webpackJsonpvinted-fe-code-challenge"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),r=n(11),a=n.n(r),i=n(10),s=n(9),l=n.n(s),u=n(4),d=n(12),j=n(2),m=n(6),f=(n(18),n(19),function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(){for(var c=arguments.length,o=new Array(c),r=0;r<c;r++)o[r]=arguments[r];clearTimeout(t),t=setTimeout((function(){return e.apply(void 0,o)}),n)}}),v=function(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),o=n[0],r=n[1];function a(){var e,t,n,c,o,a,i=(null===(e=document)||void 0===e?void 0:e.documentElement)&&(null===(t=document)||void 0===t?void 0:t.documentElement.scrollTop)||(null===(n=document)||void 0===n?void 0:n.body.scrollTop),s=(null===(c=document)||void 0===c?void 0:c.documentElement)&&(null===(o=document)||void 0===o?void 0:o.documentElement.scrollHeight)||document.body.scrollHeight;i+(null===(a=window)||void 0===a?void 0:a.innerHeight)+50>=s&&r(!0)}return Object(c.useEffect)((function(){var e,t=f(a,1500);return null===(e=window)||void 0===e||e.addEventListener("scroll",t),function(){var e;null===(e=window)||void 0===e||e.removeEventListener("scroll",t)}}),[]),Object(c.useEffect)((function(){o&&e()}),[e,o]),[o,r]};var b=function(e,t){var n=window.localStorage.getItem(t),o=Object(c.useState)((function(){return null===n?e:JSON.parse(n)})),r=Object(j.a)(o,2),a=r[0],i=r[1];return Object(c.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(a))}),[t,a]),[a,i]},h=n(3),p=n.n(h),O=n(0),g=m.imageUrl;var _=function(e){var t=e.id,n=e.title,o=e.secret,r=e.server,a=e.ownername,i=e.setLikedItems,s=e.likedItems,l=Object(c.useState)(!1),d=Object(j.a)(l,2),m=d[0],f=d[1],v="".concat(g).concat(r,"/").concat(t,"_").concat(o,".jpg"),b=s.some((function(e){return e===t})),h=b?"".concat(p.a.action," ").concat(p.a.liked):p.a.action;return Object(O.jsxs)("li",{className:p.a.card,onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:[Object(O.jsx)("div",{className:p.a.media,style:{backgroundImage:"url(".concat(v,")")}}),b&&Object(O.jsx)("div",{className:p.a.star,children:Object(O.jsx)("i",{children:"\u2764"})}),m&&Object(O.jsxs)("section",{className:p.a.content,children:[Object(O.jsx)("strong",{title:n,children:n}),Object(O.jsx)("hr",{}),Object(O.jsx)("em",{children:a}),Object(O.jsx)("button",{className:h,onClick:function(){i((function(e){return b?e.filter((function(e){return e!==t})):Object(u.a)(new Set([].concat(Object(u.a)(e),[t])))}))},children:b?"Dislike":"Like"})]})]})},k=m.url,x=m.params,w=new URLSearchParams(x);var S=function(){var e=v((function(){P((function(e){return e+1})),o(!1)})),t=Object(j.a)(e,2),n=t[0],o=t[1],r=b([],"likedPhotos"),a=Object(j.a)(r,2),s=a[0],m=a[1],f=Object(c.useState)(""),h=Object(j.a)(f,2),p=h[0],g=h[1],x=Object(c.useState)([]),S=Object(j.a)(x,2),E=S[0],C=S[1],N=Object(c.useState)(!1),y=Object(j.a)(N,2),I=y[0],L=y[1],F=Object(c.useState)(1),T=Object(j.a)(F,2),J=T[0],P=T[1],H=p?"Problem fetching photos :(":"Fetching photos ...",B=I?"No more photos!":"Fetching more photos ...",M=0===E.length?H:B;return Object(c.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.set("page",J),e.prev=1,e.next=4,fetch("".concat(k).concat(w));case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,!t.ok||"ok"!==n.stat){e.next=12;break}return C((function(e){return[].concat(Object(u.a)(e),Object(u.a)(n.photos.photo))})),L(0===n.photos.photo.length),e.abrupt("return");case 12:throw new Error(n.message);case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),g(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}})()()}),[J]),Object(O.jsxs)("div",{className:"App",children:[!!p&&Object(O.jsx)("div",{className:"alert-error",children:p}),!!E&&Object(O.jsx)("ul",{children:E.map((function(e,t){return Object(O.jsx)(_,Object(i.a)({},Object(i.a)({likedItems:s,setLikedItems:m},e)),"".concat(t,"-").concat(null===e||void 0===e?void 0:e.id))}))}),!n&&Object(O.jsx)("div",{className:"loader",children:M})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))};a.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),E()},3:function(e,t,n){e.exports={card:"Card_card__3F8np",shared:"Card_shared__1pvgm",media:"Card_media__qot8H Card_shared__1pvgm",content:"Card_content__2u8qS Card_shared__1pvgm",action:"Card_action__2eExR",liked:"Card_liked__2IB1k",star:"Card_star__3wVSe"}},6:function(e){e.exports=JSON.parse('{"url":"https://api.flickr.com/services/rest/?","imageUrl":"https://live.staticflickr.com/","params":{"api_key":"879dc778faa8db7a5cf203819045e10e","method":"flickr.photos.search","tags":"retro,vintage","tag_mode":"all","content_type":3,"per_page":50,"format":"json","nojsoncallback":1,"sort":"relevance","extras":"owner_name,description"}}')}},[[21,1,2]]]);
//# sourceMappingURL=main.ebe82cd3.chunk.js.map