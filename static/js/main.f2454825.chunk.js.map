{"version":3,"sources":["components/Card.module.css","components/Button.module.css","components/ErrorMessage.module.css","components/List.module.css","components/Loader.module.css","utils/debounce.js","hooks/useInfiniteScroll.js","hooks/useStickyState.js","components/Button.js","components/Card.js","components/Loader.js","components/ErrorMessage.js","components/List.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","debounce","callback","timer","wait","args","clearTimeout","setTimeout","useInfiniteScroll","useState","isFetching","setIsFetching","handleScroll","scrollTop","document","documentElement","body","scrollHeight","window","innerHeight","useEffect","debounceHandleScroll","addEventListener","removeEventListener","useStickyState","defaultValue","key","stickyValue","localStorage","getItem","JSON","parse","value","setValue","setItem","stringify","Button","handleLike","label","btnClass","isActive","style","button","active","className","onClick","imageUrl","API","Card","id","title","secret","server","ownername","setLikedItems","likedItems","isInfoShown","setIsInfoShown","imgSrc","isLiked","some","it","card","onMouseEnter","onMouseLeave","media","backgroundImage","star","content","prev","filter","Set","Loader","loadingText","data-testid","loader","Styles","error","warning","info","success","ErrorMessage","errorMessage","type","alert","getStyleClass","url","params","qs","URLSearchParams","List","setPage","setErrorMessage","photosData","setPhotosData","noMore","setNoMore","page","loadingTextInit","loadingTextMore","length","a","set","fetch","res","json","data","ok","stat","photos","photo","Error","message","console","log","fetchData","list","map","i","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f2454825.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__3F8np\",\"shared\":\"Card_shared__1pvgm\",\"media\":\"Card_media__qot8H Card_shared__1pvgm\",\"content\":\"Card_content__2u8qS Card_shared__1pvgm\",\"star\":\"Card_star__3wVSe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2Ce79\",\"active\":\"Button_active__1NQEE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"ErrorMessage_alert__1eMNQ\",\"error\":\"ErrorMessage_error__2MNkV\",\"warning\":\"ErrorMessage_warning__3i-GW\",\"info\":\"ErrorMessage_info__4mBzm\",\"success\":\"ErrorMessage_success__WPjb7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"List_list__12_ST\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__TLVE4\"};","const debounce = (callback, wait = 250) => {\n\tlet timer\n\treturn (...args) => {\n\t\tclearTimeout(timer)\n\t\ttimer = setTimeout(() => callback(...args), wait)\n\t}\n}\nexport default debounce\n","import { useState, useEffect } from 'react'\nimport debounce from '../utils/debounce'\n\nconst useInfiniteScroll = (callback) => {\n\tconst [isFetching, setIsFetching] = useState(false)\n\n\tuseEffect(() => {\n\t\tconst debounceHandleScroll = debounce(handleScroll, 1000)\n\t\twindow?.addEventListener('scroll', debounceHandleScroll)\n\t\treturn () => {\n\t\t\twindow?.removeEventListener('scroll', debounceHandleScroll)\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (!isFetching) return\n\t\tcallback()\n\t}, [callback, isFetching])\n\n\tfunction handleScroll() {\n\t\tconst scrollTop =\n\t\t\t(document?.documentElement && document?.documentElement.scrollTop) ||\n\t\t\tdocument?.body.scrollTop\n\t\tconst scrollHeight =\n\t\t\t(document?.documentElement && document?.documentElement.scrollHeight) ||\n\t\t\tdocument.body.scrollHeight\n\t\tif (scrollTop + window?.innerHeight + 50 >= scrollHeight) {\n\t\t\tsetIsFetching(true)\n\t\t}\n\t}\n\n\treturn [isFetching, setIsFetching]\n}\n\nexport default useInfiniteScroll\n","import { useState, useEffect } from 'react'\n\nfunction useStickyState(defaultValue, key) {\n\tconst stickyValue = window.localStorage.getItem(key)\n\tconst [value, setValue] = useState(() =>\n\t\tstickyValue === null ? defaultValue : JSON.parse(stickyValue)\n\t)\n\n\tuseEffect(() => {\n\t\twindow.localStorage.setItem(key, JSON.stringify(value))\n\t}, [key, value])\n\n\treturn [value, setValue]\n}\n\nexport default useStickyState\n","import React from 'react'\nimport style from './Button.module.css'\n\nfunction Button({ handleLike, label, isActive }) {\n\tconst btnClass = isActive ? `${style.button} ${style.active}` : style.button\n\treturn (\n\t\t<button className={btnClass} onClick={handleLike}>\n\t\t\t{label}\n\t\t</button>\n\t)\n}\n\nexport default Button\n","import React, { useState } from 'react'\nimport style from './Card.module.css'\nimport Button from './Button'\nimport API from '../configData.json'\nconst { imageUrl } = API\n\nfunction Card({\n\tid,\n\ttitle,\n\tsecret,\n\tserver,\n\townername,\n\tsetLikedItems,\n\tlikedItems,\n}) {\n\tconst [isInfoShown, setIsInfoShown] = useState(false)\n\tconst imgSrc = `${imageUrl}${server}/${id}_${secret}.jpg`\n\tconst isLiked = likedItems.some((it) => it === id)\n\n\tfunction handleLike() {\n\t\tsetLikedItems((prev) => {\n\t\t\treturn isLiked\n\t\t\t\t? prev.filter((it) => it !== id)\n\t\t\t\t: [...new Set([...prev, id])] //To ensure no duplicate entries (by id)\n\t\t})\n\t}\n\n\treturn (\n\t\t<li\n\t\t\tclassName={style.card}\n\t\t\tonMouseEnter={() => setIsInfoShown(true)}\n\t\t\tonMouseLeave={() => setIsInfoShown(false)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={style.media}\n\t\t\t\tstyle={{ backgroundImage: `url(${imgSrc})` }}\n\t\t\t/>\n\t\t\t{isLiked && (\n\t\t\t\t<div className={style.star}>\n\t\t\t\t\t<i>&#10084;</i>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{isInfoShown && (\n\t\t\t\t<section className={style.content}>\n\t\t\t\t\t<strong title={title}>{title}</strong>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<em>{ownername}</em>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\thandleLike,\n\t\t\t\t\t\t\tlabel: isLiked ? `Dislike` : `Like`,\n\t\t\t\t\t\t\tisActive: isLiked,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</section>\n\t\t\t)}\n\t\t</li>\n\t)\n}\nexport default Card\n","import React from 'react'\nimport style from './Loader.module.css'\n\nfunction Loader({ loadingText, isFetching }) {\n\treturn (\n\t\t!isFetching && (\n\t\t\t<div data-testid='loader' className={style.loader}>\n\t\t\t\t{loadingText}\n\t\t\t</div>\n\t\t)\n\t)\n}\n\nexport default Loader\n","import React from 'react'\nimport style from './ErrorMessage.module.css'\n\nconst Styles = {\n\terror: 'error',\n\twarning: 'warning',\n\tinfo: 'info',\n\tsuccess: 'success',\n}\n\nfunction ErrorMessage({ errorMessage, type }) {\n\tconst getStyleClass = (type) => Styles[type] || Styles.error //defaulted to 'error'\n\treturn (\n\t\t!!errorMessage && (\n\t\t\t<div className={`${style.alert} ${style[getStyleClass(type)]}`}>\n\t\t\t\t{errorMessage}\n\t\t\t</div>\n\t\t)\n\t)\n}\n\nexport default ErrorMessage\n","import React, { useState, useEffect } from 'react'\nimport API from '../configData.json'\nimport useInfiniteScroll from '../hooks/useInfiniteScroll'\nimport useStickyState from '../hooks/useStickyState'\nimport style from './List.module.css'\nimport Card from './Card'\nimport Loader from './Loader'\nimport ErrorMessage from './ErrorMessage'\n\nconst { url, params } = API\nconst qs = new URLSearchParams(params)\n\nfunction List() {\n\tconst [likedItems, setLikedItems] = useStickyState([], 'likedPhotos')\n\tconst [isFetching, setIsFetching] = useInfiniteScroll(fetchMore)\n\tconst [errorMessage, setErrorMessage] = useState('')\n\tconst [photosData, setPhotosData] = useState([])\n\tconst [noMore, setNoMore] = useState(false)\n\tconst [page, setPage] = useState(1)\n\n\tconst loadingTextInit = errorMessage\n\t\t? 'Problem fetching photos :('\n\t\t: 'Fetching photos ...'\n\n\tconst loadingTextMore = noMore\n\t\t? 'No more photos!'\n\t\t: 'Fetching more photos ...'\n\n\tconst loadingText =\n\t\tphotosData.length === 0 ? loadingTextInit : loadingTextMore\n\n\tfunction fetchMore() {\n\t\tsetPage((prev) => prev + 1)\n\t\tsetIsFetching(false)\n\t}\n\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\tqs.set('page', page)\n\t\t\ttry {\n\t\t\t\tconst res = await fetch(`${url}?${qs}`)\n\t\t\t\tconst data = await res.json()\n\t\t\t\tif (res.ok && data.stat === 'ok') {\n\t\t\t\t\tsetPhotosData((prev) => [...prev, ...data.photos.photo])\n\t\t\t\t\tsetNoMore(data.photos.photo.length === 0)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthrow new Error(data.message)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error)\n\t\t\t\tsetErrorMessage(error.message)\n\t\t\t}\n\t\t}\n\t\tfetchData()\n\t}, [page])\n\n\treturn (\n\t\t<>\n\t\t\t<ErrorMessage\n\t\t\t\tdata-testid='fetch-error'\n\t\t\t\t{...{ errorMessage, type: 'error' }}\n\t\t\t/>\n\t\t\t{photosData.length > 0 && (\n\t\t\t\t<ul className={style.list} data-testid='fetch-list'>\n\t\t\t\t\t{photosData.map((data, i) => (\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\tkey={`${i}-${data?.id}`}\n\t\t\t\t\t\t\t{...{ likedItems, setLikedItems, ...data }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t\t<Loader {...{ loadingText, isFetching }} />\n\t\t</>\n\t)\n}\n\nexport default List\n","import React from 'react'\nimport './styles/global.css'\nimport List from './components/List'\n\nfunction App() {\n\treturn (\n\t\t<div className='App'>\n\t\t\t<List />\n\t\t</div>\n\t)\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}